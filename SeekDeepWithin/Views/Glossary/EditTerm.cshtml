@model SeekDeepWithin.Models.GlossaryTermViewModel

@{
    ViewBag.Title = "Editing "+ Model.Name;
}

<h3><small>editing</small> @Model.Name</h3>
@using (Html.BeginForm (null, null, FormMethod.Post, new { id = "__AjaxAntiForgeryForm" })){
   @Html.AntiForgeryToken()
}

<input type="hidden" id="TermId" name="TermId" value="@Model.Id" />

<div class="row">
   <div class="small-12 columns text-right">
      <a href="@Url.Action("Term", "Glossary", new {id=Model.Id}, Request.Url.Scheme)" class="button tiny secondary">
         <i class="icon-preview"></i> view term
      </a>
   </div>
</div>

<div class="row">
   <div class="small-12 large-6 columns">
      @using (Html.BeginForm()) {
         @Html.AntiForgeryToken()
         @Html.ValidationSummary(true)

         <fieldset>
            <legend>Term Details</legend>
       
            <div class="row">
               <div class="small-12 large-12 columns">
                  @Html.LabelFor(model => model.Name)
                  @Html.EditorFor(model => model.Name)
                  @Html.ValidationMessageFor(model => model.Name)
               </div>
            </div>

            <input type="submit" value="Save" class="button" /> <a href="@TempData["RefUrl"]" class="button secondary small">cancel</a>
         </fieldset>
      }
   </div>
   <div class="small-12 large-6 columns">
      <fieldset>
         <legend>
            Tags 
            @if (Request.IsAuthenticated && User.IsInRole ("Creator")) {
               var returnUrl = Request.Url != null ? Request.Url.ToString () : string.Empty;
               <span style="font-size: small">
                  <a href="@Url.Action("Create", "Tag", new {returnUrl}, Request.Url.Scheme)">new tag</a>
               </span>
            }
         </legend>
         @foreach (var tag in Model.Tags) {
            var id = tag.ItemId;
            <div class="row" id="tag_@id">
               <div class="small-8 large-8 columns">
                  @Html.ActionLink(tag.Name, "Details", "Tag", new { id = tag.Id }, null)
               </div>
               <div class="small-4 large-4 columns text-center">
                  <a href="javascript:void(0);" onclick="tag_remove(@id, @Model.Id, 'Glossary');" title="Remove tag">
                     <i class="icon-remove-circle" style="color:red;"></i>
                  </a>
               </div>
            </div>
         }
         <div class="row">
            <div class="small-8 large-8 columns">
               @Html.DropDownList("tagId", ViewBag.Tags as SelectList)
            </div>
            <div class="small-4 large-4 columns">
               <button class="button success tiny" onclick="tag_add(@Model.Id, 'Glossary');">
                  <i class="icon-plus"></i> Add
               </button>
            </div>
         </div>
      </fieldset>
   </div>
</div>

<div class="row">
   <div class="small-12 large-6 columns">
      <a href="@Url.Action("EditSeeAlso", "Link", new {id=Model.Id}, Request.Url.Scheme)" class="button expand" id="btnEditLinks">Edit See Also's</a>
   </div>
   <div class="small-12 large-6 columns">
      <h4>New Amazon Item</h4>
   </div>
</div>

@section Scripts {
   @Scripts.Render("~/bundles/sdw.editTerm")
}
